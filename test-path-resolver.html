<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تست Path Resolver</title>
    <!-- بارگذاری path-resolver قبل از همه چیز -->
    <script src="/xi2.ir/src/assets/js/path-resolver.js"></script>
</head>
<body>
    <h1>تست مدیریت مسیر</h1>
    <p>در کنسول مرورگر چک کنید که آیا خطا وجود دارد یا نه.</p>
    
    <div style="padding: 20px; background: #f5f5f5; border-radius: 8px; margin: 20px 0;">
        <h3>بررسی مسیرها:</h3>
        <ul id="pathCheck"></ul>
    </div>
    
    <script>
        // صبر کمی برای اجرای path-resolver
        setTimeout(function() {
            var pathCheckElement = document.getElementById('pathCheck');
            
            // بررسی متغیر گلوبال
            if (window.XI_BASE_URL) {
                pathCheckElement.innerHTML += '<li style="color: green;">✅ مسیر پایه تنظیم شده: ' + window.XI_BASE_URL + '</li>';
            } else {
                pathCheckElement.innerHTML += '<li style="color: red;">❌ مسیر پایه تنظیم نشده</li>';
            }
            
            // بررسی فونت‌ها
            var fontLoaded = false;
            var testElement = document.createElement('div');
            testElement.style.fontFamily = 'Vazirmatn, Arial';
            testElement.style.opacity = '0';
            testElement.style.position = 'absolute';
            testElement.textContent = 'تست فونت';
            document.body.appendChild(testElement);
            
            // شمارش فایل‌های CSS و JS اضافه شده
            var cssCount = 0;
            var jsCount = 0;
            
            var links = document.getElementsByTagName('link');
            for (var i = 0; i < links.length; i++) {
                if (links[i].href.indexOf('/src/assets/css/') !== -1) {
                    cssCount++;
                }
            }
            
            var scripts = document.getElementsByTagName('script');
            for (var j = 0; j < scripts.length; j++) {
                if (scripts[j].src.indexOf('/src/assets/js/') !== -1) {
                    jsCount++;
                }
            }
            
            pathCheckElement.innerHTML += '<li style="color: ' + (cssCount > 0 ? 'green' : 'red') + ';">CSS Files: ' + cssCount + ' فایل</li>';
            pathCheckElement.innerHTML += '<li style="color: ' + (jsCount > 0 ? 'green' : 'red') + ';">JS Files: ' + jsCount + ' فایل</li>';
            
            // بررسی متا تگ
            var metaTag = document.querySelector('meta[name="xi-path-resolver"]');
            if (metaTag) {
                pathCheckElement.innerHTML += '<li style="color: green;">✅ متا تگ xi-path-resolver موجود است</li>';
            } else {
                pathCheckElement.innerHTML += '<li style="color: red;">❌ متا تگ xi-path-resolver موجود نیست</li>';
            }
            
            document.body.removeChild(testElement);
        }, 1000);
        
        // نمایش وضعیت DOM
        console.log('DOM Ready State:', document.readyState);
        console.log('Document Body:', document.body ? 'موجود' : 'null');
        console.log('Document Head:', document.head ? 'موجود' : 'null');
    </script>
</body>
</html>
