# 🎯 راهنمای Admin Panel زیتو (Xi2)

## 📋 معرفی
این Admin Panel برای مدیریت تنظیمات SMS و نظارت بر سیستم زیتو طراحی شده است.

## 🚀 نصب و راه‌اندازی

### 1. ایجاد جداول پایگاه داده
```bash
# ورود به MySQL
mysql -u root -p xi2_db

# اجرای اسکریپت ایجاد جداول
source admin_tables.sql;
```

### 2. تنظیم مجوزهای فایل
```bash
chmod 755 admin/
chmod 644 admin/*.php
chmod 644 admin/*/*.php
```

### 3. تست اتصال
1. مراجعه به: `http://localhost/xi2.ir/admin/login.php`
2. ورود با: **admin** / **123456**

## 📁 ساختار فایل‌ها

```
admin/
├── login.php              # صفحه ورود ادمین
├── index.php              # داشبورد اصلی
├── logout.php             # خروج از سیستم
├── assets/
│   └── admin.css         # استایل‌های admin panel
├── includes/
│   ├── auth-check.php    # بررسی احراز هویت
│   ├── header.php        # هدر مشترک
│   └── footer.php        # فوتر مشترک
├── settings/
│   ├── sms.php          # تنظیمات پیامک
│   └── test-sms.php     # تست ارسال پیامک
├── logs/
│   └── sms-logs.php     # گزارش پیامک‌ها
└── api/
    └── get-sms-details.php # API آمار SMS
```

## 🔧 ویژگی‌های اصلی

### 🎯 داشبورد
- آمار کلی سیستم (کاربران، آپلودها، پیامک‌ها)
- نمایش آخرین فعالیت‌ها
- نمایش وضعیت سیستم

### 📱 مدیریت SMS
- **تنظیمات:** پیکربندی اکانت 0098SMS
- **تست ارسال:** آزمایش عملکرد سیستم پیامک
- **گزارش‌گیری:** مشاهده تاریخچه تمام پیامک‌ها
- **فیلترینگ:** جستجو بر اساس تاریخ، وضعیت، نوع

### 🔐 امنیت
- احراز هویت session-based
- Timeout خودکار (2 ساعت)
- لاگ تمام فعالیت‌ها
- محدودیت دسترسی

## ⚙️ پیکربندی SMS

### مرحله 1: ورود به تنظیمات
1. لاگین به admin panel
2. مراجعه به **تنظیمات** > **پیامک**

### مرحله 2: وارد کردن اطلاعات
- **نام کاربری API:** zsms8829 (از مستندات)
- **رمز عبور API:** j494moo*O^HU
- **شماره ارسال‌کننده:** 3000164545
- **شماره تست:** شماره موبایل برای تست

### مرحله 3: تست عملکرد
1. ذخیره تنظیمات
2. مراجعه به **تست ارسال پیامک**
3. ارسال پیامک آزمایشی

## 📊 کدهای پاسخ SMS

| کد | توضیح |
|----|-------|
| 0 | ارسال موفق |
| 1 | شماره گیرنده اشتباه |
| 2 | گیرنده تعریف نشده |
| 9 | اعتبار کافی نیست |
| 12 | نام کاربری/رمز عبور اشتباه |
| 14 | سقف ارسال روزانه پر شده |
| 16 | عدم مجوز ارسال |

## 🛠️ توسعه و سفارشی‌سازی

### افزودن ادمین جدید
```php
// اضافه کردن به جدول admin_users
$password_hash = password_hash('your_password', PASSWORD_DEFAULT);
// سپس insert در دیتابیس
```

### تغییر تنظیمات احراز هویت
فایل: `admin/includes/auth-check.php`
```php
// تغییر مدت timeout (فعلاً 2 ساعت)
$timeout = 2 * 60 * 60;
```

### افزودن API جدید
فایل‌های API در پوشه `admin/api/` قرار دهید و از `auth-check.php` استفاده کنید.

## 🔍 عیب‌یابی

### مشکلات شایع

**1. خطای اتصال دیتابیس**
- بررسی تنظیمات در `src/database/config.php`
- اطمینان از اجرای `admin_tables.sql`

**2. خطای 404 در admin panel**
- بررسی مسیرهای فایل
- تست دسترسی فایل‌ها

**3. مشکل ارسال SMS**
- بررسی تنظیمات در بخش SMS
- تست اتصال به اینترنت
- بررسی اعتبار اکانت 0098SMS

### فایل‌های لاگ
```bash
# مشاهده لاگ‌های PHP
tail -f /Applications/XAMPP/xamppfiles/logs/error_log

# لاگ‌های خاص Xi2
grep "Xi2 Admin" /Applications/XAMPP/xamppfiles/logs/error_log
```

## 📞 پشتیبانی

### اطلاعات تماس سرویس SMS
- **وب‌سایت:** 0098sms.com
- **API URL:** https://0098sms.com/sendsmslink.aspx
- **WebService:** https://webservice.0098sms.com/service.asmx?wsdl

### نکات امنیتی
- رمز عبور admin را تغییر دهید
- فایل‌های admin را از دسترسی عمومی مخفی کنید
- به‌روزرسانی منظم انجام دهید
- لاگ‌ها را بررسی کنید

## 📝 TODO List

### اولویت بالا
- [ ] تست کامل عملکرد SMS
- [ ] بهینه‌سازی UI موبایل
- [ ] افزودن validation بیشتر

### اولویت متوسط  
- [ ] پنل آمار پیشرفته
- [ ] Export گزارش‌ها
- [ ] Multiple admin users
- [ ] Role-based permissions

### اولویت پایین
- [ ] Dark mode
- [ ] Notifications
- [ ] Dashboard widgets
- [ ] API documentation

---

**نکته:** این admin panel برای استفاده داخلی طراحی شده و نیاز به امنیت اضافی برای exposure عمومی دارد.
